<html data-namespace-typo3-fluid="true" lang="en" xmlns:f="http://typo3.org/ns/TYPO3/CMS/Fluid/ViewHelpers">

<f:layout name="Default"/>

<f:section name="main">

    <h3>SLUB Entity Facts.</h3>
    <dl>
        <f:for as="viewArrayValue" each="{viewArray}" key="viewArrayValueKey">
            <f:if condition="{viewArrayValue}">
                <f:then>
                    <f:switch expression="{viewArrayValueKey}">
                        <f:case value="relationship">
                            <dt class="item-title">
                                <f:translate id="slubentityfacts.relationship"/>
                            </dt>
                            <f:for as="relationship" each="{viewArrayValue}">
                                <dd>{relationship}</dd>
                            </f:for>
                        </f:case>

                        <f:case value="context">
                            <dt class="item-title{f:if(condition: '!{settings.debugview}', then: ' visually-hidden')}">
                                <f:translate id="slubentityfacts.context"/>
                            </dt>
                            <dd><a href="{viewArray.context}">{viewArray.context}</a></dd>
                        </f:case>

                        <f:case value="id">
                            <dt class="item-title{f:if(condition: '!{settings.debugview}', then: ' visually-hidden')}">
                                <f:translate id="slubentityfacts.id"/>
                            </dt>
                            <dd><a href="{viewArray.id}">{viewArray.id}</a></dd>
                        </f:case>

                        <f:case value="type">
                            <dt class="item-title{f:if(condition: '!{settings.debugview}', then: ' visually-hidden')}">
                                <f:translate id="slubentityfacts.type"/>
                            </dt>
                            <dd>
                                <f:translate id="slubentityfacts.type.{viewArray.type}"/>
                            </dd>
                        </f:case>

                        <f:case value="depiction">
                            <dt class="item-title{f:if(condition: '!{settings.debugview}', then: ' visually-hidden')}">
                                <f:translate id="slubentityfacts.depiction"/>
                            </dt>
                            <dd class="depiction">
                                <a href="{viewArray.depiction.url}" title="<f:translate id='slubentityfacts.visit_depiction' />">
                                    <img alt="<f:translate id='slubentityfacts.depiction' /> {viewArray.preferredName}" src="{viewArray.depiction.thumbnail.atid}"/>
                                </a>
                            </dd>
                        </f:case>

                        <f:case value="relatedPerson">
                            <dt class="item-title">
                                <f:translate id="slubentityfacts.relatedPerson"/>
                            </dt>
                            <f:for as="newRelatedPerson" each="{viewArray.relatedPerson}" key="newRelatedPersonKey">
                                <dd>
                                    <a href="{newRelatedPerson.atid}">{newRelatedPerson.preferredName} ({newRelatedPerson.relationship})</a>
                                </dd>
                            </f:for>
                        </f:case>

                        <f:case value="variantName">
                            <dt class="item-title">
                                <f:translate id="slubentityfacts.variantName"/>
                            </dt>
                            <f:for as="variantName" each="{viewArrayValue}">
                                <dd>{variantName}</dd>
                            </f:for>
                        </f:case>

                        <f:case value="placeOfBusiness">
                            <dt class="item-title">
                                <f:translate id="slubentityfacts.placeOfBusiness"/>
                            </dt>
                            <f:for as="placeOfBusiness" each="{viewArrayValue}">
                                <f:for as="placeOfBusinessArray" each="{placeOfBusiness}" key="placeOfBusinessArrayKey">
                                    <f:if condition="{placeOfBusinessArrayKey}=='@id'">
                                        <f:then>
                                            <dd><a href="{placeOfBusinessArray}">{placeOfBusinessArray}</a></dd>
                                        </f:then>
                                        <f:else>
                                            <dd>{placeOfBusinessArray}</dd>
                                        </f:else>
                                    </f:if>
                                </f:for>
                            </f:for>
                        </f:case>

                        <f:case value="predecessor">
                            <dt class="item-title">
                                <f:translate id="slubentityfacts.predecessor"/>
                            </dt>
                            <f:for as="predecessor" each="{viewArrayValue}">
                                <f:for as="predecessorArray" each="{predecessor}" key="predecessorArrayKey">
                                    <f:if condition="{predecessorArrayKey}=='@id'">
                                        <f:then>
                                            <dd><a href="{predecessorArray}">{predecessorArray}</a></dd>
                                        </f:then>
                                        <f:else>
                                            <dd>{predecessorArray}</dd>
                                        </f:else>
                                    </f:if>
                                </f:for>
                            </f:for>
                        </f:case>

                        <f:case value="isA">
                            <dt class="item-title{f:if(condition: '!{settings.debugview}', then: ' visually-hidden')}">
                                <f:translate id="slubentityfacts.isA"/>
                            </dt>
                            <f:for as="isA" each="{viewArrayValue}">
                                <f:for as="isAArray" each="{isA}" key="isAArrayKey">
                                    <f:if condition="{isAArrayKey}=='@id'">
                                        <f:then>
                                            <dd><a href="{isAArray}">{isAArray}</a></dd>
                                        </f:then>
                                        <f:else>
                                            <dd>{isAArray}</dd>
                                        </f:else>
                                    </f:if>
                                </f:for>
                            </f:for>
                        </f:case>

                        <f:case value="dateOfEstablishment">
                            <dt class="item-title">
                                <f:translate id="slubentityfacts.dateOfEstablishment"/>
                            </dt>
                            <f:for as="dateOfEstablishment" each="{viewArrayValue}">
                                <dd>{dateOfEstablishment}</dd>
                            </f:for>
                        </f:case>

                        <f:case value="describedBy"/>

                        <f:case value="associatedPlace">
                            <dt class="item-title">
                                <f:translate id="slubentityfacts.associatedPlace"/>
                            </dt>
                            <f:for as="associatedPlace" each="{viewArrayValue}">
                                <dd><a href="{associatedPlace.atid}">{associatedPlace.preferredName}</a></dd>
                            </f:for>
                        </f:case>

                        <f:case value="gender">
                            <dt class="item-title">
                                <f:if condition="{settings.debugview}">
                                    <f:translate id="slubentityfacts.gender"/>
                                </f:if>
                            </dt>
                            <dd><a href="{viewArray.gender.atid}">{viewArray.gender.label}</a></dd>
                        </f:case>

                        <f:case value="familialRelationship">
                            <dt class="item-title">
                                <f:translate id="slubentityfacts.familialRelationship"/>
                            </dt>
                            <f:for as="member" each="{viewArray.familialRelationship}">
                                <dd><a href="{member.atid}">{member.preferredName} ({member.relationship})</a></dd>
                            </f:for>
                        </f:case>

                        <f:case value="professionOrOccupation">
                            <dt class="item-title">
                                <f:translate id="slubentityfacts.professionOrOccupation"/>
                            </dt>
                            <f:for as="profession" each="{viewArray.professionOrOccupation}">
                                <dd><a href="{profession.atid}">{profession.preferredName}</a></dd>
                            </f:for>
                        </f:case>

                        <f:case value="affiliation">
                            <dt class="item-title">
                                <f:translate id="slubentityfacts.affiliation"/>
                            </dt>
                            <f:for as="number" each="{viewArray.affiliation}">
                                <dd><a href="{number.atid}">{number.preferredName}</a></dd>
                            </f:for>
                        </f:case>

                        <f:case value="pseudonym">
                            <dt class="item-title">
                                <f:translate id="slubentityfacts.pseudonym"/>
                            </dt>
                            <f:for as="number" each="{viewArray.pseudonym}">
                                <dd>{number.preferredName}</dd>
                            </f:for>
                        </f:case>

                        <f:case value="placeOfActivity">
                            <dt class="item-title">
                                <f:translate id="slubentityfacts.placeOfActivity"/>
                            </dt>
                            <f:for as="place" each="{viewArray.placeOfActivity}">
                                <dd><a href="{place.atid}">{place.preferredName}</a></dd>
                            </f:for>
                        </f:case>

                        <f:case value="placeOfBirth">
                            <dt class="item-title">
                                <f:translate id="slubentityfacts.placeOfBirth"/>
                            </dt>
                            <f:for as="place" each="{viewArray.placeOfBirth}">
                                <dd><a href="{place.atid}">{place.preferredName}</a></dd>
                            </f:for>
                        </f:case>

                        <f:case value="placeOfDeath">
                            <dt class="item-title">
                                <f:translate id="slubentityfacts.placeOfDeath"/>
                            </dt>
                            <f:for as="place" each="{viewArray.placeOfDeath}">
                                <dd><a href="{place.atid}">{place.preferredName}</a></dd>
                            </f:for>
                        </f:case>

                        <f:case value="dateOfBirth">
                            <dt class="item-title">
                                <f:if condition="{settings.debugview}">
                                    <f:translate id="slubentityfacts.dateOfBirth"/>
                                </f:if>
                            </dt>
                            <dd>&ast; {viewArrayValue} &hyphen;
                                <f:if condition="{viewArray.dateOfDeath}">
                                    &dagger; {viewArray.dateOfDeath}
                                </f:if>
                            </dd>
                        </f:case>

                        <f:case value="preferredName">
                            <dt class="item-title{f:if(condition: '!{settings.debugview}', then: ' visually-hidden')}">
                                <f:translate id="slubentityfacts.preferredName"/>
                            </dt>
                            <dd><h3>{viewArray.preferredName}</h3></dd>
                        </f:case>

                        <f:case value="biographicalOrHistoricalInformation">
                            <dt class="item-title{f:if(condition: '!{settings.debugview}', then: ' visually-hidden')}">
                                <f:translate id="slubentityfacts.{viewArrayValueKey}"/>
                            </dt>
                            <dd class="biographical">{viewArrayValue}</dd>
                        </f:case>

                        <f:defaultCase>
                            <f:if condition="{settings.debugview}">
                                <dt class="item-title{f:if(condition: '!{settings.debugview}', then: ' visually-hidden')}">
                                    <f:translate id="slubentityfacts.{viewArrayValueKey}"/>
                                </dt>
                                <dd>{viewArrayValue}</dd>
                            </f:if>
                        </f:defaultCase>

                    </f:switch>
                </f:then>
                <f:else>
                    <f:if condition="{settings.debugview}">
                        <dt class="item-title">
                            <f:translate id="slubentityfacts.{viewArrayValueKey}"/>
                        </dt>
                        <dd>
                            <f:translate id="slubentityfacts.noContent"/>
                        </dd>
                    </f:if>
                </f:else>
            </f:if>
        </f:for>
    </dl>

    <f:if condition="{settings.entityfacts.sameAs}=='1'">
        <f:then>
            <f:if condition="{sameAsArray}">
                <h4>
                    <f:translate id="slubentityfacts.sameAs"/>
                </h4>
                <ul class="link-collection">
                    <f:for as="item" each="{sameAsArray}">
                        <li class="link-item">
                            <f:link.external title="{item.collection.publisher}" uri="{item.atid}" target="_blank">
                                <f:if condition="{item.collection.icon}">
                                    <f:then>
                                        <img alt="icon of {item.collection.name}" class="icon" src="{item.collection.icon}"/>
                                        <span class="label visually-hidden">{item.collection.name}</span>
                                    </f:then>
                                    <f:else>
                                        <span class="label">{item.collection.abbr}</span>
                                    </f:else>
                                </f:if>
                            </f:link.external>
                        </li>
                    </f:for>
                </ul>
            </f:if>
        </f:then>
    </f:if>

    <f:if condition="{settings.meta}">
        <dl class="meta-information">
            <dt><f:translate id="slubentityfacts.describedBy"/></dt>
            <dd><a href="{viewArray.describedBy.atid}" title="{f:translate(id: 'slubentityfacts.describedBy')}">{viewArray.describedBy.atid}</a></dd>
            <dt><f:translate id="slubentityfacts.license" /></dt>
            <dd><a href="{viewArray.describedBy.license}" title="{f:translate(id: 'slubentityfacts.license')}">{viewArray.describedBy.license}</a></dd>
            <dt>{f:translate(id:'slubentityfacts.timestamp')}</dt>
            <dd>{viewArray.describedBy.valid -> f:format.date(format:'d.m.Y H:m:s')}</dd>
        </dl>
    </f:if>

</f:section>

</html>
